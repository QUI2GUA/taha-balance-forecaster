{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/user/taha-balance-forecaster/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport { PrismaClient } from '@prisma/client'\n\n// Declare a global variable to hold the Prisma client instance.\n// This is necessary because in a serverless environment (like Next.js), \n// a new instance might be created on every hot-reload, exhausting database connections.\ndeclare global {\n  var prisma: PrismaClient | undefined\n}\n\n// Create a new Prisma client if one doesn't already exist in the global scope.\n// This singleton pattern prevents creating multiple instances of Prisma Client.\nconst client = globalThis.prisma || new PrismaClient()\n\n// In development, set the global prisma instance to the newly created client.\nif (process.env.NODE_ENV !== 'production') globalThis.prisma = client\n\nexport default client\n"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;;AASA,+EAA+E;AAC/E,gFAAgF;AAChF,MAAM,SAAS,WAAW,MAAM,IAAI,IAAI,6IAAY;AAEpD,8EAA8E;AAC9E,wCAA2C,WAAW,MAAM,GAAG;uCAEhD"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///home/user/taha-balance-forecaster/app/actions.ts"],"sourcesContent":["// app/actions.ts\n'use server'\n\nimport { z } from 'zod';\nimport prisma from '@/lib/db'; // CORRECT: Import the shared client\nimport { revalidatePath } from 'next/cache';\n\n// Define the validation schema matching our form\nconst transactionSchema = z.object({\n  title: z.string().min(2, \"Title must be at least 2 characters\"),\n  amount: z.coerce.number().min(0.01, \"Amount must be greater than 0\"),\n  type: z.enum([\"INCOME\", \"EXPENSE\"]),\n  startDate: z.date(),\n  recurrence: z.enum([\n    \"ONE_TIME\", \"WEEKLY\", \"BI_WEEKLY\", \"MONTHLY\", \n    \"BI_MONTHLY\", \"QUARTERLY\", \"ANNUALLY\"\n  ]),\n});\n\nexport async function createTransaction(formData: z.infer<typeof transactionSchema>) {\n  // 1. Calculate final amount (flip sign for expense)\n  const finalAmount = formData.type === 'EXPENSE' \n    ? -formData.amount \n    : formData.amount;\n\n  // 2. Insert into DB\n  // Note: We are hardcoding accountId for now since we haven't built Auth yet.\n  // In a real app, you'd get the user's Account ID here.\n  \n  // Find or create a default account for the demo\n  const account = await prisma.account.findFirst() || await prisma.account.create({\n    data: { name: \"Main Checking\", currentBalance: 2000 }\n  });\n\n  await prisma.transaction.create({\n    data: {\n      accountId: account.id,\n      title: formData.title,\n      amount: finalAmount,\n      startDate: formData.startDate,\n      recurrence: formData.recurrence,\n    }\n  });\n\n  // 3. Revalidate the dashboard so the new data shows up instantly\n  revalidatePath('/');\n  \n  return { success: true };\n}\n\nexport async function skipTransaction(transactionId: string, dateString: string) {\n  // 1. Find the transaction\n  const transaction = await prisma.transaction.findUnique({\n    where: { id: transactionId }\n  });\n\n  if (!transaction) throw new Error(\"Transaction not found\");\n\n  // 2. Get existing skipped dates safely\n  const existingSkipped = (transaction.skippedDates as string[]) || [];\n\n  // 3. Add new date if not already present\n  if (!existingSkipped.includes(dateString)) {\n    await prisma.transaction.update({\n      where: { id: transactionId },\n      data: {\n        skippedDates: [...existingSkipped, dateString]\n      }\n    });\n  }\n\n  // 4. Update the UI\n  revalidatePath('/');\n}\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;;AAGjB;AACA,uLAA+B,oCAAoC;AACnE;;;;;;AAEA,iDAAiD;AACjD,MAAM,oBAAoB,uKAAC,CAAC,MAAM,CAAC;IACjC,OAAO,uKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,QAAQ,uKAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM;IACpC,MAAM,uKAAC,CAAC,IAAI,CAAC;QAAC;QAAU;KAAU;IAClC,WAAW,uKAAC,CAAC,IAAI;IACjB,YAAY,uKAAC,CAAC,IAAI,CAAC;QACjB;QAAY;QAAU;QAAa;QACnC;QAAc;QAAa;KAC5B;AACH;AAEO,eAAe,kBAAkB,QAA2C;IACjF,oDAAoD;IACpD,MAAM,cAAc,SAAS,IAAI,KAAK,YAClC,CAAC,SAAS,MAAM,GAChB,SAAS,MAAM;IAEnB,oBAAoB;IACpB,6EAA6E;IAC7E,uDAAuD;IAEvD,gDAAgD;IAChD,MAAM,UAAU,MAAM,oHAAM,CAAC,OAAO,CAAC,SAAS,MAAM,MAAM,oHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAC9E,MAAM;YAAE,MAAM;YAAiB,gBAAgB;QAAK;IACtD;IAEA,MAAM,oHAAM,CAAC,WAAW,CAAC,MAAM,CAAC;QAC9B,MAAM;YACJ,WAAW,QAAQ,EAAE;YACrB,OAAO,SAAS,KAAK;YACrB,QAAQ;YACR,WAAW,SAAS,SAAS;YAC7B,YAAY,SAAS,UAAU;QACjC;IACF;IAEA,iEAAiE;IACjE,IAAA,+IAAc,EAAC;IAEf,OAAO;QAAE,SAAS;IAAK;AACzB;AAEO,eAAe,gBAAgB,aAAqB,EAAE,UAAkB;IAC7E,0BAA0B;IAC1B,MAAM,cAAc,MAAM,oHAAM,CAAC,WAAW,CAAC,UAAU,CAAC;QACtD,OAAO;YAAE,IAAI;QAAc;IAC7B;IAEA,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;IAElC,uCAAuC;IACvC,MAAM,kBAAkB,AAAC,YAAY,YAAY,IAAiB,EAAE;IAEpE,yCAAyC;IACzC,IAAI,CAAC,gBAAgB,QAAQ,CAAC,aAAa;QACzC,MAAM,oHAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAC9B,OAAO;gBAAE,IAAI;YAAc;YAC3B,MAAM;gBACJ,cAAc;uBAAI;oBAAiB;iBAAW;YAChD;QACF;IACF;IAEA,mBAAmB;IACnB,IAAA,+IAAc,EAAC;AACjB;;;IAtDsB;IA+BA;;AA/BA,+OAAA;AA+BA,+OAAA"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/user/taha-balance-forecaster/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createTransaction as '40f3cccc1b2faf0d9de2372b786d028a5220395d6b'} from 'ACTIONS_MODULE0'\nexport {skipTransaction as '602de8126cb1129ff1616b4fc37f05d01cd034044f'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}